{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import Panzoom from\"@panzoom/panzoom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[file,setFile]=useState(null);const[repoOwner,setRepoOwner]=useState(\"\");const[repoName,setRepoName]=useState(\"\");const[graphUrl,setGraphUrl]=useState(null);const[uploadOption,setUploadOption]=useState(\"file\");// Default to file upload\nconst panzoomContainerRef=useRef(null);// Reference for panzoom container\n// Handle file change\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];setFile(selectedFile);};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();// Ensure both file or repo inputs are validated before submission\nif(uploadOption===\"file\"&&!file){alert(\"Please upload a file.\");return;}if(uploadOption===\"repo\"&&(!repoOwner||!repoName)){alert(\"Please enter both repository owner and name.\");return;}const formData=new FormData();// Append the upload option to the FormData\nformData.append(\"uploadOption\",uploadOption);// Append the uploadOption\n// Append file or repo details to FormData\nif(uploadOption===\"file\"){formData.append(\"code_file\",file);}else{formData.append(\"repo_owner\",repoOwner);formData.append(\"repo_name\",repoName);}// Debugging: Log the FormData content\nconsole.log(\"FormData being sent:\");formData.forEach((value,key)=>console.log(key,value));try{const response=await fetch(\"http://127.0.0.1:5000/upload\",{method:\"POST\",body:formData});if(response.ok){const data=await response.json();if(data.visualization){// The backend returns the relative URL; we need to prepend the Flask base URL\nsetGraphUrl('http://localhost:5000'+data.visualization);}else{alert(\"Error generating graph\");}}else{alert(\"Error generating graph\");}}catch(error){console.error(\"Error:\",error);alert(\"Error during submission\");}};// Initialize Panzoom when the graph URL is updated\nuseEffect(()=>{if(graphUrl&&panzoomContainerRef.current){const panzoomInstance=Panzoom(panzoomContainerRef.current,{maxScale:5,minScale:1,contain:\"outside\"});// Clean up Panzoom instance on component unmount\nreturn()=>panzoomInstance.dispose();}},[graphUrl]);// Only run when graphUrl is updated\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",height:\"100vh\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload Code File or Enter Repository Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"uploadOption\",children:\"Select an option:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"uploadOption\",value:uploadOption,onChange:e=>setUploadOption(e.target.value),style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"file\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"option\",{value:\"repo\",children:\"Enter Repo Details\"})]}),uploadOption===\"file\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"fileUpload\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code_file\",children:\"Upload Code File:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".py,.txt,.md\",onChange:handleFileChange})]}),uploadOption===\"repo\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"repoDetails\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_owner\",children:\"Repository Owner:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_owner\",placeholder:\"Enter Repo Owner\",value:repoOwner,onChange:e=>setRepoOwner(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_name\",children:\"Repository Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_name\",placeholder:\"Enter Repo Name\",value:repoName,onChange:e=>setRepoName(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:\"20px\"},children:\"Submit\"})]}),graphUrl&&/*#__PURE__*/_jsxs(\"div\",{id:\"graph-container\",ref:panzoomContainerRef// Assign the ref to the container\n,style:{marginTop:\"30px\",width:\"80%\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generated Graph\"}),/*#__PURE__*/_jsx(\"img\",{src:graphUrl,alt:\"Generated Graph\",className:\"graph-image\",style:{width:\"100%\",maxWidth:\"800px\",// Ensure it's not too big\nmargin:\"0 auto\",// Center the image\nborder:\"1px solid #ddd\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGraphUrl(null),id:\"close-button\",style:{position:\"absolute\",top:\"10px\",right:\"10px\",fontSize:\"20px\",cursor:\"pointer\",background:\"red\",color:\"white\",border:\"none\",borderRadius:\"50%\"},children:\"\\u2716 Close\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","Panzoom","jsx","_jsx","jsxs","_jsxs","App","file","setFile","repoOwner","setRepoOwner","repoName","setRepoName","graphUrl","setGraphUrl","uploadOption","setUploadOption","panzoomContainerRef","handleFileChange","e","selectedFile","target","files","handleSubmit","preventDefault","alert","formData","FormData","append","console","log","forEach","value","key","response","fetch","method","body","ok","data","json","visualization","error","current","panzoomInstance","maxScale","minScale","contain","dispose","className","style","display","flexDirection","alignItems","justifyContent","height","children","onSubmit","textAlign","htmlFor","id","onChange","marginTop","type","accept","placeholder","ref","width","position","src","alt","maxWidth","margin","border","onClick","top","right","fontSize","cursor","background","color","borderRadius"],"sources":["/Users/vaibhav/PycharmProjects/llm-visplain/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Panzoom from \"@panzoom/panzoom\";\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [repoOwner, setRepoOwner] = useState(\"\");\n  const [repoName, setRepoName] = useState(\"\");\n  const [graphUrl, setGraphUrl] = useState(null);\n  const [uploadOption, setUploadOption] = useState(\"file\"); // Default to file upload\n  const panzoomContainerRef = useRef(null); // Reference for panzoom container\n\n  // Handle file change\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Ensure both file or repo inputs are validated before submission\n    if (uploadOption === \"file\" && !file) {\n      alert(\"Please upload a file.\");\n      return;\n    }\n\n    if (uploadOption === \"repo\" && (!repoOwner || !repoName)) {\n      alert(\"Please enter both repository owner and name.\");\n      return;\n    }\n\n    const formData = new FormData();\n\n    // Append the upload option to the FormData\n    formData.append(\"uploadOption\", uploadOption);  // Append the uploadOption\n\n    // Append file or repo details to FormData\n    if (uploadOption === \"file\") {\n      formData.append(\"code_file\", file);\n    } else {\n      formData.append(\"repo_owner\", repoOwner);\n      formData.append(\"repo_name\", repoName);\n    }\n\n    // Debugging: Log the FormData content\n    console.log(\"FormData being sent:\");\n    formData.forEach((value, key) => console.log(key, value));\n\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.visualization) {\n          // The backend returns the relative URL; we need to prepend the Flask base URL\n          setGraphUrl('http://localhost:5000' + data.visualization);\n        } else {\n          alert(\"Error generating graph\");\n        }\n      } else {\n        alert(\"Error generating graph\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Error during submission\");\n    }\n  };\n\n  // Initialize Panzoom when the graph URL is updated\n  useEffect(() => {\n    if (graphUrl && panzoomContainerRef.current) {\n      const panzoomInstance = Panzoom(panzoomContainerRef.current, {\n        maxScale: 5,\n        minScale: 1,\n        contain: \"outside\",\n      });\n\n      // Clean up Panzoom instance on component unmount\n      return () => panzoomInstance.dispose();\n    }\n  }, [graphUrl]); // Only run when graphUrl is updated\n\n  return (\n    <div className=\"App\" style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\", height: \"100vh\" }}>\n      <h1>Upload Code File or Enter Repository Details</h1>\n\n      <form onSubmit={handleSubmit} style={{ textAlign: \"center\" }}>\n        <label htmlFor=\"uploadOption\">Select an option:</label>\n        <select\n          id=\"uploadOption\"\n          value={uploadOption}\n          onChange={(e) => setUploadOption(e.target.value)}\n          style={{ marginTop: \"10px\" }}\n        >\n          <option value=\"file\">Upload File</option>\n          <option value=\"repo\">Enter Repo Details</option>\n        </select>\n\n        {/* File Upload Section */}\n        {uploadOption === \"file\" && (\n          <div id=\"fileUpload\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"code_file\">Upload Code File:</label>\n            <input\n              type=\"file\"\n              accept=\".py,.txt,.md\"\n              onChange={handleFileChange}\n            />\n          </div>\n        )}\n\n        {/* Repository Details Section */}\n        {uploadOption === \"repo\" && (\n          <div id=\"repoDetails\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"repo_owner\">Repository Owner:</label>\n            <input\n              type=\"text\"\n              id=\"repo_owner\"\n              placeholder=\"Enter Repo Owner\"\n              value={repoOwner}\n              onChange={(e) => setRepoOwner(e.target.value)}\n            />\n            <br />\n            <label htmlFor=\"repo_name\">Repository Name:</label>\n            <input\n              type=\"text\"\n              id=\"repo_name\"\n              placeholder=\"Enter Repo Name\"\n              value={repoName}\n              onChange={(e) => setRepoName(e.target.value)}\n            />\n          </div>\n        )}\n\n        <button type=\"submit\" style={{ marginTop: \"20px\" }}>\n          Submit\n        </button>\n      </form>\n\n      {/* Display Graph Image after generation */}\n      {graphUrl && (\n        <div\n          id=\"graph-container\"\n          ref={panzoomContainerRef} // Assign the ref to the container\n          style={{ marginTop: \"30px\", width: \"80%\", position: \"relative\" }}\n        >\n          <h2>Generated Graph</h2>\n          <img\n            src={graphUrl}\n            alt=\"Generated Graph\"\n            className=\"graph-image\"\n            style={{\n              width: \"100%\",\n              maxWidth: \"800px\", // Ensure it's not too big\n              margin: \"0 auto\", // Center the image\n              border: \"1px solid #ddd\",\n            }}\n          />\n          <button\n            onClick={() => setGraphUrl(null)}\n            id=\"close-button\"\n            style={{\n              position: \"absolute\",\n              top: \"10px\",\n              right: \"10px\",\n              fontSize: \"20px\",\n              cursor: \"pointer\",\n              background: \"red\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"50%\",\n            }}\n          >\n            ✖ Close\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}