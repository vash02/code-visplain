{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[file,setFile]=useState(null);const[repoOwner,setRepoOwner]=useState(\"\");const[repoName,setRepoName]=useState(\"\");const[graphUrl,setGraphUrl]=useState(null);const[uploadOption,setUploadOption]=useState(\"file\");// Default to file upload\n// Handle file change\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];setFile(selectedFile);};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();if(uploadOption===\"file\"&&!file){alert(\"Please upload a file.\");return;}if(uploadOption===\"repo\"&&(!repoOwner||!repoName)){alert(\"Please enter both repository owner and name.\");return;}const formData=new FormData();if(uploadOption===\"file\"){formData.append(\"code_file\",file);}else{formData.append(\"repo_owner\",repoOwner);formData.append(\"repo_name\",repoName);}try{console.log(\"Sending request with FormData:\",formData);// Debugging the request\nconst response=await fetch(\"http://localhost:5000/upload\",{method:\"POST\",body:formData,// Sending form data\nheaders:{// Uncomment if CORS is not handled by flask-cors\n// 'Content-Type': 'multipart/form-data',\n}});if(response.ok){const imageBlob=await response.blob();const imageObjectURL=URL.createObjectURL(imageBlob);setGraphUrl(imageObjectURL);}else{console.log(\"Error response:\",response);// Log response for debugging\nalert(\"Error uploading file or fetching repo\");}}catch(error){console.error(\"Error:\",error);alert(\"Error during submission\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload Code File or Enter Repository Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"uploadOption\",children:\"Select an option:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"uploadOption\",value:uploadOption,onChange:e=>setUploadOption(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"file\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"option\",{value:\"repo\",children:\"Enter Repo Details\"})]}),uploadOption===\"file\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"fileUpload\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code_file\",children:\"Upload Code File:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".py,.txt,.md\",onChange:handleFileChange})]}),uploadOption===\"repo\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"repoDetails\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_owner\",children:\"Repository Owner:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_owner\",placeholder:\"Enter Repo Owner\",value:repoOwner,onChange:e=>setRepoOwner(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_name\",children:\"Repository Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_name\",placeholder:\"Enter Repo Name\",value:repoName,onChange:e=>setRepoName(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:\"20px\"},children:\"Submit\"})]}),graphUrl&&/*#__PURE__*/_jsxs(\"div\",{id:\"graph-container\",style:{marginTop:\"30px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generated Graph\"}),/*#__PURE__*/_jsx(\"img\",{src:graphUrl,alt:\"Generated Graph\",className:\"graph-image\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGraphUrl(null),id:\"close-button\",className:\"close-button\",children:\"\\u2716 Close\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","App","file","setFile","repoOwner","setRepoOwner","repoName","setRepoName","graphUrl","setGraphUrl","uploadOption","setUploadOption","handleFileChange","e","selectedFile","target","files","handleSubmit","preventDefault","alert","formData","FormData","append","console","log","response","fetch","method","body","headers","ok","imageBlob","blob","imageObjectURL","URL","createObjectURL","error","className","children","onSubmit","htmlFor","id","value","onChange","style","marginTop","type","accept","placeholder","src","alt","onClick"],"sources":["/Users/vaibhav/PycharmProjects/llm-visplain/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [repoOwner, setRepoOwner] = useState(\"\");\n  const [repoName, setRepoName] = useState(\"\");\n  const [graphUrl, setGraphUrl] = useState(null);\n  const [uploadOption, setUploadOption] = useState(\"file\"); // Default to file upload\n\n  // Handle file change\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (uploadOption === \"file\" && !file) {\n      alert(\"Please upload a file.\");\n      return;\n    }\n\n    if (uploadOption === \"repo\" && (!repoOwner || !repoName)) {\n      alert(\"Please enter both repository owner and name.\");\n      return;\n    }\n\n    const formData = new FormData();\n    if (uploadOption === \"file\") {\n      formData.append(\"code_file\", file);\n    } else {\n      formData.append(\"repo_owner\", repoOwner);\n      formData.append(\"repo_name\", repoName);\n    }\n\n    try {\n      console.log(\"Sending request with FormData:\", formData);  // Debugging the request\n\n      const response = await fetch(\"http://localhost:5000/upload\", {\n        method: \"POST\",\n        body: formData,  // Sending form data\n        headers: {\n          // Uncomment if CORS is not handled by flask-cors\n          // 'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      if (response.ok) {\n        const imageBlob = await response.blob();\n        const imageObjectURL = URL.createObjectURL(imageBlob);\n        setGraphUrl(imageObjectURL);\n      } else {\n        console.log(\"Error response:\", response);  // Log response for debugging\n        alert(\"Error uploading file or fetching repo\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      alert(\"Error during submission\");\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Upload Code File or Enter Repository Details</h1>\n\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"uploadOption\">Select an option:</label>\n        <select\n          id=\"uploadOption\"\n          value={uploadOption}\n          onChange={(e) => setUploadOption(e.target.value)}\n        >\n          <option value=\"file\">Upload File</option>\n          <option value=\"repo\">Enter Repo Details</option>\n        </select>\n\n        {/* File Upload Section */}\n        {uploadOption === \"file\" && (\n          <div id=\"fileUpload\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"code_file\">Upload Code File:</label>\n            <input\n              type=\"file\"\n              accept=\".py,.txt,.md\"\n              onChange={handleFileChange}\n            />\n          </div>\n        )}\n\n        {/* Repository Details Section */}\n        {uploadOption === \"repo\" && (\n          <div id=\"repoDetails\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"repo_owner\">Repository Owner:</label>\n            <input\n              type=\"text\"\n              id=\"repo_owner\"\n              placeholder=\"Enter Repo Owner\"\n              value={repoOwner}\n              onChange={(e) => setRepoOwner(e.target.value)}\n            />\n            <br />\n            <label htmlFor=\"repo_name\">Repository Name:</label>\n            <input\n              type=\"text\"\n              id=\"repo_name\"\n              placeholder=\"Enter Repo Name\"\n              value={repoName}\n              onChange={(e) => setRepoName(e.target.value)}\n            />\n          </div>\n        )}\n\n        <button type=\"submit\" style={{ marginTop: \"20px\" }}>\n          Submit\n        </button>\n      </form>\n\n      {/* Display Graph Image after generation */}\n      {graphUrl && (\n        <div id=\"graph-container\" style={{ marginTop: \"30px\" }}>\n          <h2>Generated Graph</h2>\n          <img src={graphUrl} alt=\"Generated Graph\" className=\"graph-image\" />\n          <button\n            onClick={() => setGraphUrl(null)}\n            id=\"close-button\"\n            className=\"close-button\"\n          >\n            âœ– Close\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}