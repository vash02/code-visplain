{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import Panzoom from\"@panzoom/panzoom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[file,setFile]=useState(null);const[repoOwner,setRepoOwner]=useState(\"\");const[repoName,setRepoName]=useState(\"\");const[graphUrl,setGraphUrl]=useState(null);const[uploadOption,setUploadOption]=useState(\"file\");const panzoomContainerRef=useRef(null);// Reference for panzoom container\n// Handle file change\nconst handleFileChange=e=>{const selectedFile=e.target.files[0];setFile(selectedFile);};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();// Ensure both file or repo inputs are validated before submission\nif(uploadOption===\"file\"&&!file){alert(\"Please upload a file.\");return;}if(uploadOption===\"repo\"&&(!repoOwner||!repoName)){alert(\"Please enter both repository owner and name.\");return;}const formData=new FormData();// Append the upload option to the FormData\nformData.append(\"uploadOption\",uploadOption);// Append the uploadOption\n// Append file or repo details to FormData\nif(uploadOption===\"file\"){formData.append(\"code_file\",file);}else{formData.append(\"repo_owner\",repoOwner);formData.append(\"repo_name\",repoName);}// Debugging: Log the FormData content\nconsole.log(\"FormData being sent:\");formData.forEach((value,key)=>console.log(key,value));try{const response=await fetch(\"http://127.0.0.1:5000/upload\",{method:\"POST\",body:formData});if(response.ok){const data=await response.json();if(data.visualization){setGraphUrl(data.visualization);}else{alert(\"Error generating graph\");}}else{alert(\"Error generating graph\");}}catch(error){console.error(\"Error:\",error);alert(\"Error during submission\");}};// Initialize Panzoom when the graph URL is updated\nuseEffect(()=>{if(graphUrl&&panzoomContainerRef.current){const panzoomInstance=Panzoom(panzoomContainerRef.current,{maxScale:5,minScale:1,contain:\"outside\"});// Clean up Panzoom instance on component unmount\nreturn()=>panzoomInstance.dispose();}},[graphUrl]);// Only run when graphUrl is updated\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload Code File or Enter Repository Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"uploadOption\",children:\"Select an option:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"uploadOption\",value:uploadOption,onChange:e=>setUploadOption(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"file\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"option\",{value:\"repo\",children:\"Enter Repo Details\"})]}),uploadOption===\"file\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"fileUpload\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code_file\",children:\"Upload Code File:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".py,.txt,.md\",onChange:handleFileChange})]}),uploadOption===\"repo\"&&/*#__PURE__*/_jsxs(\"div\",{id:\"repoDetails\",style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_owner\",children:\"Repository Owner:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_owner\",placeholder:\"Enter Repo Owner\",value:repoOwner,onChange:e=>setRepoOwner(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repo_name\",children:\"Repository Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"repo_name\",placeholder:\"Enter Repo Name\",value:repoName,onChange:e=>setRepoName(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{marginTop:\"20px\"},children:\"Submit\"})]}),graphUrl&&/*#__PURE__*/_jsxs(\"div\",{id:\"graph-container\",ref:panzoomContainerRef// Assign the ref to the container\n,style:{marginTop:\"30px\",width:\"100%\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generated Graph\"}),/*#__PURE__*/_jsx(\"img\",{src:graphUrl,alt:\"Generated Graph\",className:\"graph-image\",style:{width:\"80%\",margin:\"0 auto\"}// Adjust the size of the image\n}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGraphUrl(null),id:\"close-button\",style:{position:\"absolute\",top:\"10px\",right:\"10px\",fontSize:\"20px\",cursor:\"pointer\",background:\"red\",color:\"white\",border:\"none\",borderRadius:\"50%\"},children:\"\\u2716 Close\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","Panzoom","jsx","_jsx","jsxs","_jsxs","App","file","setFile","repoOwner","setRepoOwner","repoName","setRepoName","graphUrl","setGraphUrl","uploadOption","setUploadOption","panzoomContainerRef","handleFileChange","e","selectedFile","target","files","handleSubmit","preventDefault","alert","formData","FormData","append","console","log","forEach","value","key","response","fetch","method","body","ok","data","json","visualization","error","current","panzoomInstance","maxScale","minScale","contain","dispose","className","children","onSubmit","htmlFor","id","onChange","style","marginTop","type","accept","placeholder","ref","width","textAlign","src","alt","margin","onClick","position","top","right","fontSize","cursor","background","color","border","borderRadius"],"sources":["/Users/vaibhav/PycharmProjects/llm-visplain/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Panzoom from \"@panzoom/panzoom\";\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [repoOwner, setRepoOwner] = useState(\"\");\n  const [repoName, setRepoName] = useState(\"\");\n  const [graphUrl, setGraphUrl] = useState(null);\n  const [uploadOption, setUploadOption] = useState(\"file\");\n  const panzoomContainerRef = useRef(null); // Reference for panzoom container\n\n  // Handle file change\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n  e.preventDefault();\n\n  // Ensure both file or repo inputs are validated before submission\n  if (uploadOption === \"file\" && !file) {\n    alert(\"Please upload a file.\");\n    return;\n  }\n\n  if (uploadOption === \"repo\" && (!repoOwner || !repoName)) {\n    alert(\"Please enter both repository owner and name.\");\n    return;\n  }\n\n  const formData = new FormData();\n\n  // Append the upload option to the FormData\n  formData.append(\"uploadOption\", uploadOption);  // Append the uploadOption\n\n  // Append file or repo details to FormData\n  if (uploadOption === \"file\") {\n    formData.append(\"code_file\", file);\n  } else {\n    formData.append(\"repo_owner\", repoOwner);\n    formData.append(\"repo_name\", repoName);\n  }\n\n  // Debugging: Log the FormData content\n  console.log(\"FormData being sent:\");\n  formData.forEach((value, key) => console.log(key, value));\n\n  try {\n    const response = await fetch(\"http://127.0.0.1:5000/upload\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      if (data.visualization) {\n        setGraphUrl(data.visualization);\n      } else {\n        alert(\"Error generating graph\");\n      }\n    } else {\n      alert(\"Error generating graph\");\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    alert(\"Error during submission\");\n  }\n};\n\n  // Initialize Panzoom when the graph URL is updated\n  useEffect(() => {\n    if (graphUrl && panzoomContainerRef.current) {\n      const panzoomInstance = Panzoom(panzoomContainerRef.current, {\n        maxScale: 5,\n        minScale: 1,\n        contain: \"outside\",\n      });\n\n      // Clean up Panzoom instance on component unmount\n      return () => panzoomInstance.dispose();\n    }\n  }, [graphUrl]); // Only run when graphUrl is updated\n\n  return (\n    <div className=\"App\">\n      <h1>Upload Code File or Enter Repository Details</h1>\n\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"uploadOption\">Select an option:</label>\n        <select\n          id=\"uploadOption\"\n          value={uploadOption}\n          onChange={(e) => setUploadOption(e.target.value)}\n        >\n          <option value=\"file\">Upload File</option>\n          <option value=\"repo\">Enter Repo Details</option>\n        </select>\n\n        {/* File Upload Section */}\n        {uploadOption === \"file\" && (\n          <div id=\"fileUpload\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"code_file\">Upload Code File:</label>\n            <input\n              type=\"file\"\n              accept=\".py,.txt,.md\"\n              onChange={handleFileChange}\n            />\n          </div>\n        )}\n\n        {/* Repository Details Section */}\n        {uploadOption === \"repo\" && (\n          <div id=\"repoDetails\" style={{ marginTop: \"20px\" }}>\n            <label htmlFor=\"repo_owner\">Repository Owner:</label>\n            <input\n              type=\"text\"\n              id=\"repo_owner\"\n              placeholder=\"Enter Repo Owner\"\n              value={repoOwner}\n              onChange={(e) => setRepoOwner(e.target.value)}\n            />\n            <br />\n            <label htmlFor=\"repo_name\">Repository Name:</label>\n            <input\n              type=\"text\"\n              id=\"repo_name\"\n              placeholder=\"Enter Repo Name\"\n              value={repoName}\n              onChange={(e) => setRepoName(e.target.value)}\n            />\n          </div>\n        )}\n\n        <button type=\"submit\" style={{ marginTop: \"20px\" }}>\n          Submit\n        </button>\n      </form>\n\n      {/* Display Graph Image after generation */}\n      {graphUrl && (\n        <div\n          id=\"graph-container\"\n          ref={panzoomContainerRef} // Assign the ref to the container\n          style={{ marginTop: \"30px\", width: \"100%\", textAlign: \"center\" }}\n        >\n          <h2>Generated Graph</h2>\n          <img\n            src={graphUrl}\n            alt=\"Generated Graph\"\n            className=\"graph-image\"\n            style={{ width: \"80%\", margin: \"0 auto\" }} // Adjust the size of the image\n          />\n          <button\n            onClick={() => setGraphUrl(null)}\n            id=\"close-button\"\n            style={{\n              position: \"absolute\",\n              top: \"10px\",\n              right: \"10px\",\n              fontSize: \"20px\",\n              cursor: \"pointer\",\n              background: \"red\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"50%\",\n            }}\n          >\n            ✖ Close\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}